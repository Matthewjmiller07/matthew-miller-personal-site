---
import Layout from '../layouts/Layout.astro';
import LinkIcon from '../components/icons/LinkIcon.astro'; // Assuming you have this from media-appearances

// Define your projects
// You can add a brief description for each later if you like
const githubUsername = "matthewjmiller07"; // ** VERIFY YOUR GITHUB USERNAME **

const projects = [
    { name: "bibleMap", description: "Interactive map of biblical locations." },
    { name: "Colors", description: "A color utility or exploration tool." },
    { name: "CompaniesHouseMap", description: "Mapping data from Companies House." },
    { name: "Crypto", description: "A cryptocurrency related project." },
    { name: "G2researchmethodology", description: "Showcasing G2's research methodology." },
    { name: "github-slideshow", description: "A slideshow tool for GitHub content." },
    { name: "HaftaraStats", description: "Statistics and visualizations for Haftara readings." },
    { name: "Jewish-JS", description: "JavaScript utilities for Jewish texts or calculations." },
    { name: "leviticus-quiz", description: "A quiz on the Book of Leviticus." },
    { name: "LiteraryBible", description: "Exploring literary devices in the Bible (Color-Coded Bible)." },
    { name: "MegaMap", description: "A comprehensive mapping application." },
    { name: "micrography", description: "Generates micrography from images and text." },
    { name: "neigh2", description: "A neighborhood or social data project." },
    { name: "New-Zmanim", description: "Advanced Zmanim lookup and tracking." },
    { name: "Omer", description: "Tool for counting the Omer." },
    { name: "Parsha-Explorer", description: "In-depth exploration of biblical parshas." },
    { name: "Particles", description: "A particle animation or simulation." },
    { name: "pinmap", description: "Track and share visited locations on a map." },
    { name: "rebbe", description: "A project related to a Rebbe or Chassidic thought." },
    { name: "SefariaMemory", description: "Memory quiz for Hebrew texts from Sefaria (Memory Quiz)." },
    { name: "Tesla-Cost-Calculator", description: "Calculates Tesla ownership costs." },
    { name: "TorahScheduler", description: "Create custom Torah and Mishnah study schedules." },
    { name: "uscities", description: "Interactive map of US and UK cities with shared names." },
    { name: "whenarethejewishholidays", description: "Interactive Jewish holiday calendar." },
    { name: "xaastracker", description: "Tracking examples of XaaS (Everything as a Service)." },
    { name: "Zmanim", description: "Zmanim lookup (possibly an earlier version or related)." }
].map(project => ({
    ...project,
    url: `https://${githubUsername}.github.io/${project.name}/`
}));

// Separate list for your "Jewish Projects" and "Data Projects" from Squarespace content
// This is for the projects that WILL BE subdomains later.
// For now, these also link to GH Pages if they are the same. Adjust if they are different.
const featuredProjectsInfo = [
    // Jewish Projects
    { name: "Interlinear Bible", repoName: "InterlinearBible", description: "Digital PDF collection of Tanach chapters in bilingual format.", category: "Jewish Studies", isSubdomain: true }, // Example, adjust repoName if different
    { name: "Memory Quiz (SefariaMemory)", repoName: "SefariaMemory", description: "Memorize Hebrew texts from Sefaria.", category: "Jewish Studies", isSubdomain: true },
    { name: "Haftara Stats", repoName: "HaftaraStats", description: "Visualize Haftarah readings across rites.", category: "Jewish Studies", isSubdomain: true },
    { name: "Biblical City Names Map", repoName: "bibleMap", description: "Interactive map of Biblical locations and US/UK cities.", category: "Jewish Studies", isSubdomain: true }, // Assuming bibleMap is this
    { name: "Micrography", repoName: "micrography", description: "Recreate images using chosen text.", category: "Jewish Studies", isSubdomain: true },
    { name: "Zmanim Tracker (New-Zmanim)", repoName: "New-Zmanim", description: "Advanced Zmanim lookup and comparison.", category: "Jewish Studies", isSubdomain: true },
    { name: "Parsha Explorer", repoName: "Parsha-Explorer", description: "In-depth exploration of biblical texts.", category: "Jewish Studies", isSubdomain: true },
    { name: "Torah Schedule Creator", repoName: "TorahScheduler", description: "Customized Torah and Mishnah study schedules.", category: "Jewish Studies", isSubdomain: true },
    { name: "When are the Jewish Holidays", repoName: "whenarethejewishholidays", description: "Explore Jewish holidays interactively.", category: "Jewish Studies", isSubdomain: true },
    { name: "Literary Bible (Color-Coded Bible)", repoName: "LiteraryBible", description: "Explore the Hebrew Bible with highlighted literary devices.", category: "Jewish Studies", isSubdomain: true },
    // Data Projects
    { name: "US & UK Cities Map", repoName: "uscities", description: "Map of US/UK cities with shared names.", category: "Data Viz", isSubdomain: true },
    // Micrography is already listed above
    { name: "Pinmap (Travel Tracker)", repoName: "pinmap", description: "Track and share cities, states, and countries visited.", category: "Data Viz", isSubdomain: true },
].map(p => ({
    ...p,
    // For now, link to GitHub pages. Later, these will be subdomains.
    url: `https://${githubUsername}.github.io/${p.repoName}/`,
    // When subdomains are ready:
    // url: p.isSubdomain ? `https://${p.repoName.toLowerCase()}.yourcustomdomain.com` : `https://${githubUsername}.github.io/${p.repoName}/`
}));

const allDisplayProjects = [...new Map([...featuredProjectsInfo, ...projects].map(item => [item.name, item])).values()];
// This de-duplicates by name, giving preference to featuredProjectsInfo if names overlap.
---

<Layout
    title="My Projects"
    description="A showcase of Matthew Miller's diverse projects, ranging from tech innovations and data visualizations to in-depth Jewish studies tools."
>
    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16">
        <header class="mb-12 text-center">
            <h1 class="text-4xl font-extrabold tracking-tight text-primary-light dark:text-primary-dark sm:text-5xl">
                Projects Showcase
            </h1>
            <p class="mt-4 text-lg text-secondary-light dark:text-secondary-dark max-w-2xl mx-auto">
                Explore a collection of my work, including tools for Jewish studies, data visualizations, and various tech experiments.
            </p>
        </header>

        {/* Section for projects that will become subdomains */}
        <section class="mb-16">
            <h2 class="text-3xl font-bold tracking-tight text-primary-light dark:text-primary-dark mb-8 text-center sm:text-left">
                Featured Applications
            </h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8">
                {featuredProjectsInfo.filter(p => p.isSubdomain).map(project => (
                    <a href={project.url} target="_blank" rel="noopener noreferrer"
                       class="block p-6 bg-card-bg-light dark:bg-card-bg-dark rounded-xl shadow-lg hover:shadow-2xl border border-border-light dark:border-border-dark transform hover:-translate-y-1 transition-all duration-200 group">
                        <h3 class="text-xl font-semibold mb-2 text-accent dark:text-accent-dark group-hover:underline">
                            {project.name}
                        </h3>
                        {project.description && (
                            <p class="text-sm text-secondary-light dark:text-secondary-dark mb-3 leading-relaxed">
                                {project.description}
                            </p>
                        )}
                        <div class="flex items-center text-xs text-accent dark:text-accent-dark font-medium">
                            View Project
                            <LinkIcon class="w-3.5 h-3.5 ml-1.5 group-hover:translate-x-0.5 transition-transform" />
                        </div>
                        {project.category && (
                            <span class="absolute top-4 right-4 text-xs bg-accent/10 text-accent dark:text-accent-dark px-2 py-0.5 rounded-full font-medium">{project.category}</span>
                        )}
                    </a>
                ))}
            </div>
            <p class="text-center mt-8 text-sm text-secondary-light dark:text-secondary-dark">
                These applications are currently hosted on GitHub Pages and will be moved to subdomains of my custom domain soon.
            </p>
        </section>

        {/* Section for other GitHub projects */}
        <section>
            <h2 class="text-3xl font-bold tracking-tight text-primary-light dark:text-primary-dark mb-8 text-center sm:text-left">
                More GitHub Repositories
            </h2>
            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 md:gap-6">
                {projects.filter(p => !featuredProjectsInfo.find(fp => fp.name === p.name && fp.isSubdomain)).map(project => (
                    <a href={project.url} target="_blank" rel="noopener noreferrer"
                       class="block p-4 bg-card-bg-light dark:bg-card-bg-dark rounded-lg shadow-md hover:shadow-xl border border-border-light dark:border-border-dark transform hover:-translate-y-0.5 transition-all duration-150 group">
                        <h3 class="text-md font-semibold mb-1 text-primary-light dark:text-primary-dark group-hover:text-accent dark:group-hover:text-accent-dark">
                            {project.name}
                        </h3>
                        {project.description && project.description.length > 50 ? ( // Show shorter desc for these smaller cards
                             <p class="text-xs text-secondary-light dark:text-secondary-dark mb-2 leading-snug truncate-2-lines">{project.description}</p>
                        ) : project.description ? (
                             <p class="text-xs text-secondary-light dark:text-secondary-dark mb-2 leading-snug">{project.description}</p>
                        ): null}
                        <div class="flex items-center text-xs text-accent dark:text-accent-dark font-medium">
                            View on GitHub
                            <LinkIcon class="w-3 h-3 ml-1 group-hover:translate-x-0.5 transition-transform" />
                        </div>
                    </a>
                ))}
            </div>
        </section>
    </main>
</Layout>

<style>
/* Helper for truncating text to a specific number of lines */
.truncate-2-lines {
    overflow: hidden;
    text-overflow: ellipsis;
    display: -webkit-box;
    -webkit-line-clamp: 2; /* number of lines to show */
    -webkit-box-orient: vertical;
}
</style>